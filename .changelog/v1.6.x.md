# Release v1.6.x - Changelog

Released: Unreleased

## Overview

Folder picker improvements for Windows: drive selector, home directory quick-nav, and error handling.

## Features

### FolderPicker: Windows drive navigation
- Added drive selector bar showing all available Windows drives (A–Z) so users can navigate between drives without typing paths
- Active drive is visually highlighted with the accent color
- Drive list is fetched from the server and only shown on Windows

### FolderPicker: Home directory shortcut
- Added a Home button in the path bar to quickly jump to the user's home directory (`~`)
- Server resolves `~` to the actual home directory path

## Fixes

### Windows CMD window flash and infinite restart loop
- Added `windowsHide: true` to **every** `spawn()`, `exec()`, `execSync()`, and `execAsync()` call across the entire server — previous fix only covered `pm2.js` and a few services, missing ~20 other spawn sites in routes, cos-runner, agents, scaffold, git cloner, brain, digital-twin, aiDetect, pm2Standardizer, taskConflict, platform, and detect
- Added `windowsHide: IS_WIN` to all 6 app definitions in `ecosystem.config.cjs` so PM2 daemon spawns PortOS processes without visible CMD windows
- Added `windowsHide: IS_WIN` to PM2 programmatic API calls (`pm2.start()` in `startApp` and `startWithCommand`) — these were the primary path for starting managed apps like sdlive
- Added `max_restarts: 10`, `min_uptime: '10s'`, and `restart_delay: 5000` to `startApp` and `startWithCommand` — previously had `autorestart: true` with no restart cap, causing infinite CMD window spawn loops when a managed app crashed on startup
- Fixed PM2 fork mode crash on Windows: when ecosystem configs use `script: 'npm'` (common pattern), PM2 resolves it to `npm.cmd` and tries to `require()` a batch file as JavaScript, causing `SyntaxError: Invalid or unexpected token` + infinite restart loop. On Windows, `startFromEcosystem` now loads the config, patches non-JS scripts with `interpreter: 'none'` (spawn mode), writes a temp config, and starts PM2 with it. Same fix applied to `startWithCommand` and `startApp`.

### FolderPicker: Error state handling
- Directory load errors now display inline with a message and "Go to default directory" recovery button instead of silently failing
- Select button is disabled when no path is loaded
