# Release v0.14.x - Changelog

Released: YYYY-MM-DD

## Overview

This release adds Ghostty terminal theme integration and a project update workflow.

## Features

### Ghostty Shell Integration
- **6 custom terminal themes** (blue, green, purple, orange, red, cyan) â€” each theme has a distinct color palette tuned for different project types
- **`proj` launcher function** â€” open any project directory in a themed Ghostty window with `proj <path> [theme]`; auto-detects `.ghostty-theme` files for per-project theming
- **Auto-theme on `cd`** â€” OSC escape sequences dynamically recolor the terminal and update the tab title when entering/leaving directories with `.ghostty-theme` files (chpwd hook)
- **`proj-themes` listing** â€” shows all available themes with emoji indicators and descriptions
- **`setup-ghostty.js` installer** â€” copies themes to Ghostty config dirs, adds shell source line to `~/.zshrc` (all idempotent)
- **Opt-in during `setup.sh`** â€” first-time setup prompts for Ghostty integration; safe to skip if Ghostty isn't installed

### Update Script
- **`update.sh`** â€” one-command post-pull updater that refreshes dependencies, ensures data/browser setup, and re-syncs Ghostty themes
- **`npm run update`** â€” npm script equivalent for the same workflow

### Secret Env Var Masking
- **`secretEnvVars` field on providers** â€” flag individual env vars as secret so their values display as `***` on the provider list, preventing accidental exposure of tokens/keys
- **Lock/unlock toggle in provider form** â€” each env var row has a ðŸ”’/ðŸ”“ button to toggle secret status; secret inputs use `type="password"`
- **"Secret" checkbox on new env var** â€” when adding a new env var, check "Secret" to auto-add it to the masked list
- **One-per-line env var display** â€” env vars now render vertically instead of comma-separated for better readability

### Agent Card App Badge
- **App name visible on agent cards** â€” running and completed agent cards now display a cyan badge showing which app the agent is working on (e.g., "portos", "kalshibot"), with workspace path tooltip on hover
- **App badge on task items** â€” pending, active, blocked, and completed tasks in the Tasks tab now show the same cyan app badge, resolving the app UUID to a human-readable name
- **Fixed UUID display** â€” agent cards and task items now resolve app UUIDs to app names via server-side lookup instead of showing raw UUIDs

### Per-Project Agent Concurrency Limits
- **`maxConcurrentAgentsPerProject` config** â€” new setting that caps how many agents can run simultaneously for any single project, preventing one app from hogging all available slots
- **Dual-limit enforcement** â€” the existing `maxConcurrentAgents` acts as the global cap, while the new per-project limit ensures fair distribution across projects
- **Autonomy level presets updated** â€” Standby (1/1), Assistant (2/1), Manager (3/2), YOLO (5/3) now include per-project defaults
- **ConfigTab UI** â€” new "Max Agents Per Project" row in the configuration panel with tooltip explaining the behavior

### System Health Widget
- **Dashboard health overview** â€” new widget at the top of the dashboard showing server uptime, memory/CPU usage, PM2 process status, and app health at a glance
- **Color-coded status indicators** â€” healthy (green), warning (yellow), or critical (red) based on system metrics
- **Progress bars for resource usage** â€” visual memory and CPU usage bars that change color as thresholds are crossed (75%=warning, 90%=critical)
- **Warning banners** â€” prominent alerts for high memory, CPU load, errored processes, or excessive restarts
- **CoS status integration** â€” shows if Chief of Staff is running/paused with active agent count
- **New `/api/health/system` endpoint** â€” consolidates system metrics, PM2 process stats, app status, and CoS state in one API call

## Fixes

- **Disabled GLSL custom shaders** â€” fragment shaders (bloom, nebula, rain, etc.) ran per-pixel every frame causing GPU-bound lag on terminal output; themes now use color palettes only
- **Silenced Ghostty `SEL:` debug spam** â€” macOS Cocoa input selector messages (`SEL: insertNewline:`, `SEL: insertTab:`, etc.) leaked to the parent terminal when `proj` launched Ghostty as a background process; redirected stdout/stderr to `/dev/null`
- **Fixed "Invalid Date" on git status page** â€” git commit dates used `%ci` format (space-separated timezone) which some JS engines reject; switched to `%cI` for strict ISO 8601 output
- **Fixed "Run on App" dropdown hidden on mobile** â€” `overflow-hidden` on TaskTypeRow clipped the absolutely-positioned app selector; removed overflow clip and added responsive margins
- **Fixed per-app overrides matrix not visible on mobile** â€” reduced left margins on small screens, added minimum table width with edge-to-edge horizontal scroll
