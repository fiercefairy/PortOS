# Release v0.16.x - Changelog

Released: YYYY-MM-DD

## Overview

Agent persistence, reliability, and decision transparency improvements.

## Fixes

### Agent history now persists across state resets
- **Completed agents no longer disappear** -- previously, all agent history was stored only in `state.json`; if the state file was reset or corrupted, all completed agents vanished from the UI despite metadata files existing on disk
- **Added disk-backed agent cache** -- `getAgents()` now merges in-memory state (running agents) with persisted metadata files from `data/cos/agents/{id}/metadata.json`, so completed agents always survive state resets
- **Lazy-loaded cache** with ~1987 historical agents loaded on first access and kept in sync as agents complete
- **`getAgent()` falls back to disk** -- individual agent lookups now check the cache when not found in state
- **`deleteAgent()` now cleans up disk files** -- previously only removed from state, leaving orphaned metadata directories; now removes the agent directory entirely
- **`clearCompletedAgents()` now cleans up disk files** -- previously only cleared state, leaving metadata files that would reappear on next cache load; now removes all completed agent directories

## Improvements

### CoS now records every no-action decision with reasons
- **Capacity decisions logged** -- when max concurrent agents (global or per-project) prevents task spawning, the reason is recorded to the decision log with full context (which limit was hit, how many agents running)
- **Cooldown decisions logged** -- when a system task is skipped because its target app is still in cooldown, the decision log captures the app ID and cooldown window duration
- **Idle decisions logged** -- when CoS has nothing to spawn after a full evaluation, it records whether that's due to tasks awaiting approval, all tasks on cooldown, or genuinely no work available
- **New decision types** -- added `CAPACITY_FULL` and `IDLE` to the decision type vocabulary; started using the previously-defined but unused `COOLDOWN_ACTIVE` type
- **Dashboard surfacing** -- capacity and cooldown decisions now appear in the impactful decisions summary on the dashboard, making it easy to spot bottlenecks at a glance
